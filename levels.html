<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>é€‰æ‹©å…³å¡ - Oxford English Flashcards</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="levels.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="levels-container">
        <!-- Background gradient overlay -->
        <div class="gradient-bg levels-bg"></div>

        <!-- Header -->
        <header class="levels-header">
            <div class="header-content">
                <h1 class="levels-title">ğŸ¯ é€‰æ‹©å…³å¡</h1>
                <p class="levels-subtitle">æ¯ä¸ªå…³å¡15ä¸ªå•è¯ï¼Œéš¾åº¦ï¼šç‰›æ´¥æ ‘L1</p>
            </div>
            <div class="total-progress">
                <span class="progress-label">æ€»è¿›åº¦</span>
                <div class="progress-ring">
                    <svg viewBox="0 0 36 36">
                        <path class="progress-ring-bg" d="M18 2.0845
                            a 15.9155 15.9155 0 0 1 0 31.831
                            a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path class="progress-ring-fill" id="progressRing" stroke-dasharray="0, 100" d="M18 2.0845
                            a 15.9155 15.9155 0 0 1 0 31.831
                            a 15.9155 15.9155 0 0 1 0 -31.831" />
                    </svg>
                    <span class="progress-percent" id="totalProgressPercent">0%</span>
                </div>
            </div>
        </header>

        <!-- Levels Grid -->
        <main class="levels-grid" id="levelsGrid">
            <!-- Levels will be dynamically inserted here -->
        </main>

        <!-- Footer Stats -->
        <footer class="levels-footer">
            <div class="stats-container">
                <div class="stat-item">
                    <span class="stat-value" id="totalWords">0</span>
                    <span class="stat-label">æ€»å•è¯æ•°</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="completedLevels">0</span>
                    <span class="stat-label">å·²å®Œæˆå…³å¡</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="learnedWords">0</span>
                    <span class="stat-label">å·²å­¦ä¹ </span>
                </div>
            </div>
        </footer>
    </div>

    <script src="levels.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const levelsGrid = document.getElementById('levelsGrid');
            const levels = LEVELS_CONFIG.getAllLevels();

            // Calculate stats
            let totalLearned = 0;
            let completedCount = 0;

            levels.forEach(level => {
                const progress = LEVELS_CONFIG.getLevelProgress(level.id);
                if (progress.completed) {
                    completedCount++;
                    totalLearned += level.cards.length;
                } else {
                    totalLearned += progress.currentIndex;
                }
            });

            // Update stats
            document.getElementById('totalWords').textContent = LEVELS_CONFIG.getTotalWordCount();
            document.getElementById('completedLevels').textContent = completedCount;
            document.getElementById('learnedWords').textContent = totalLearned;

            // Update progress ring
            const totalProgress = Math.round((totalLearned / LEVELS_CONFIG.getTotalWordCount()) * 100);
            document.getElementById('totalProgressPercent').textContent = `${totalProgress}%`;
            document.getElementById('progressRing').setAttribute('stroke-dasharray', `${totalProgress}, 100`);

            // Render levels
            levels.forEach((level, index) => {
                const progress = LEVELS_CONFIG.getLevelProgress(level.id);
                const progressPercent = Math.round((progress.currentIndex / level.cards.length) * 100);
                const isCompleted = progress.completed;

                const levelCard = document.createElement('div');
                levelCard.className = `level-card ${isCompleted ? 'completed' : ''} ${!level.unlocked ? 'locked' : ''}`;
                levelCard.style.animationDelay = `${index * 0.05}s`;

                levelCard.innerHTML = `
                    <div class="level-icon">${level.icon}</div>
                    <div class="level-info">
                        <h3 class="level-name">${level.name}</h3>
                        <p class="level-theme">${level.theme}</p>
                        <p class="level-description">${level.description}</p>
                    </div>
                    <div class="level-progress">
                        <div class="progress-bar-small">
                            <div class="progress-fill-small" style="width: ${isCompleted ? 100 : progressPercent}%"></div>
                        </div>
                        <span class="progress-text-small">${isCompleted ? 'å·²å®Œæˆ' : `${progress.currentIndex}/${level.cards.length}`}</span>
                    </div>
                    ${isCompleted ? '<div class="completed-badge">âœ“</div>' : ''}
                    ${!level.unlocked ? '<div class="locked-overlay"><span>ğŸ”’</span></div>' : ''}
                `;

                if (level.unlocked) {
                    levelCard.addEventListener('click', () => {
                        // Navigate to game with level parameter
                        window.location.href = `index.html?level=${level.id}`;
                    });
                }

                levelsGrid.appendChild(levelCard);
            });
        });
    </script>
</body>

</html>